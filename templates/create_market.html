{% extends "base.html" %}

{% block title %}Create Market - PredictionMarket{% endblock %}

{% block content %}
<div class="create-market-container">
    <h1>Create New Market</h1>
    <p class="subtitle">Create a binary or over/under prediction market</p>

    <form method="POST" action="{{ url_for('create_market') }}" class="create-market-form" id="createMarketForm">
        <div class="form-group">
            <label for="question">Market Question</label>
            <input type="text" id="question" name="question" class="form-input"
                placeholder="e.g., Who will win the championship?" required>
        </div>

        <div class="form-group">
            <label>Market Type</label>
            <div class="market-type-selector">
                <label class="radio-card">
                    <input type="radio" name="market_type" value="binary" checked>
                    <div class="radio-card-content">
                        <span class="radio-icon">‚öñÔ∏è</span>
                        <span class="radio-title">Binary Market</span>
                        <span class="radio-desc">This or That (e.g., Team A vs Team B)</span>
                    </div>
                </label>
                <label class="radio-card">
                    <input type="radio" name="market_type" value="over_under">
                    <div class="radio-card-content">
                        <span class="radio-icon">üìä</span>
                        <span class="radio-title">Over/Under Market</span>
                        <span class="radio-desc">Above or below a target value</span>
                    </div>
                </label>
            </div>
        </div>

        <!-- Binary Market Fields -->
        <div id="binaryFields" class="market-type-fields">
            <div class="form-row">
                <div class="form-group">
                    <label for="option_a">Option A</label>
                    <input type="text" id="option_a" name="option_a" class="form-input" placeholder="e.g., Team A">
                </div>
                <div class="form-group">
                    <label for="option_b">Option B</label>
                    <input type="text" id="option_b" name="option_b" class="form-input" placeholder="e.g., Team B">
                </div>
            </div>
        </div>

        <!-- Over/Under Market Fields -->
        <div id="overUnderFields" class="market-type-fields" style="display: none;">
            <div class="form-row">
                <div class="form-group">
                    <label for="target_value">Target Value</label>
                    <input type="number" id="target_value" name="target_value" class="form-input"
                        placeholder="e.g., 3.5" step="0.1">
                </div>
                <div class="form-group">
                    <label for="unit">Unit</label>
                    <input type="text" id="unit" name="unit" class="form-input"
                        placeholder="e.g., hours, points, goals">
                </div>
            </div>
        </div>

        <div class="form-actions">
            <a href="{{ url_for('dashboard') }}" class="btn-secondary">Cancel</a>
            <button type="submit" class="btn-primary">Create Market</button>
        </div>
    </form>
</div>
{% endblock %}

{% block scripts %}
<script>
    // Toggle between binary and over/under fields
    const marketTypeRadios = document.querySelectorAll('input[name="market_type"]');
    const binaryFields = document.getElementById('binaryFields');
    const overUnderFields = document.getElementById('overUnderFields');

    marketTypeRadios.forEach(radio => {
        radio.addEventListener('change', function () {
            if (this.value === 'binary') {
                binaryFields.style.display = 'block';
                overUnderFields.style.display = 'none';
                // Make binary fields required
                document.getElementById('option_a').required = true;
                document.getElementById('option_b').required = true;
                document.getElementById('target_value').required = false;
                document.getElementById('unit').required = false;
            } else {
                binaryFields.style.display = 'none';
                overUnderFields.style.display = 'block';
                // Make over/under fields required
                document.getElementById('option_a').required = false;
                document.getElementById('option_b').required = false;
                document.getElementById('target_value').required = true;
                document.getElementById('unit').required = true;
            }
        });
    });
</script>
{% endblock %}